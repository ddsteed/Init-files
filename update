#!/usr/bin/env  zsh
#
#-----------------------------------------------------------------------
# This script is to update all Mac/Linux softwares
#
# Author: Hao Feng (F1)
# Date:   Mar. 13, 2022
#
# Copyright (c) 2022, RDS
#-----------------------------------------------------------------------

if [[ `uname` == "Darwin" ]]; then
    update=(mac abrew ibrew aconda mconda)
elif [[ `uname` == "Linux" ]]; then
    update=(apt)
fi

echoline () {
    echo "--------------------------------------------"
}
    
num=0
total=${#update[@]}

for mission in ${update[@]}; do
    let num++
    echo
    echoline
    echo " [$num/$total]: "

    case $mission in
        mac)
            echo " Updating Mac OS system & softwares ... "
            
            softwareupdate --all --install --force
            ;;
        abrew)
            echo " Updating Homebrew (arm) applications ... "
            
            source  ~/Init/arm
            yes yes | abrewup
            abrew cleanup
            ;;
        ibrew)
            echo " Updating Homebrew (x86_64) applications ... "
            
            source ~/Init/x86
            yes yes | ibrewup
            ibrew cleanup
            ;;
        aconda)
            echo " Updating anaconda ... "
            
            source ~/Init/aconda
            yes yes | condaup
            yes yes | acondaup
            conda clean --all --yes
            ;;
        mconda)
            echo " Updating miniconda ... "
            
            source ~/Init/mconda
            yes yes | condaup
            conda clean --all --yes
            ;;
        apt)
            echo " Updating Ubuntu Linux apt softwares ... "

            sudo apt-get update -y && sudo apt-get upgrade -y
            sudo apt-get autoremove
            ;;
    esac
done
